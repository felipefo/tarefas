<!DOCTYPE html>
<html>
    <head>
        
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script  src="./js/visao/menu.js"></script>
        <script  src="./js/visao/index.js"></script>
        <script  src="./js/controle/controleTarefas.js"></script>
        <script  src="./js/controle/controleUsuarios.js"></script>
		<title>Lista de Tarefas</title>
        <link rel="stylesheet" href="./css/style.css"/>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    </head>
    <body>

        <script>
            function openNav() {
                document.getElementById("menu").style.width = "200px";
            }
            function closeNav() {
                document.getElementById("menu").style.width = "0";
            }

            //esse evento será disparado quando a pagina for carregada
            document.addEventListener("DOMContentLoaded", function() {
                console.log("DOM completamente carregado e analisado");
                var controleTarefa = new ControleTarefa();
                var controleUsuario = new ControleUsuarios();
                controleTarefa.get();
                var form = document.getElementById("adicionartarefa");
                //esse evento será disparado quando o formulario for submetido
                form.addEventListener('submit', controleTarefa.post);  
                
                var formAtualizar = document.getElementById("atualizartarefa");
                //esse evento será disparado quando o formulario for submetido
                formAtualizar.addEventListener('submit', controleTarefa.put); 
                
                var formLogin = document.getElementById("login_usuario");
                //esse evento será disparado quando o formulario for submetido
                formLogin.addEventListener('submit', controleUsuario.login);  
                
           });


        </script>
        <nav id="menu"></nav>
        <div class="menuButton" >
            <div  class="menuConteudo">
                <div style="display:inline" onclick="openNav()"><i class="material-icons">menu</i></div>
            </div>
        </div>
        <div id="teste" style="margin:10px;margin-top:70px;">
            <table id="lista_de_tarefas">
                <tr>
                    <th>Descrição</th>
                    <th class='hide_420px' >Categoria</th>
                    <th>Status</th>
                    <th>Data</th>
                    <th>Ações</th>
            </table>
            <br>
            <input type="button" onclick="document.getElementById('adicionar').style.display = 'block'" value="Adicionar Tarefa" style="float: right;"/>

            
               <div  id="atualizar" class="modal">
                <form class="modal-content animate"  id="atualizartarefa"  name="atualizartarefa" action="/www/api/Tarefas.php" method="post">
                    <h3>Atualizar tarefa</h3>
                    <div class="container">
                        Descrição: <textarea name="descricao" id="descricao" rows="5" cols="33" placeholder="Descreva a tarefa" required></textarea><br><br>
                        Data de finalização: <input type="date" name="datafim" id="datafim"><br><br>
                        Categoria: <select name="categoria" >
                            <option value="Casa">Casa</option>
                            <option value="Estudo">Trabalho</option>
                            <option value="Família">Família</option>
                            <option value="Trabalho" selected>Estudo</option>
                        </select>
                        <br><br>
                        Status: 
                        <select name="status" id="status">
                            <option value="Arquivado">Arquivado</option>
                            <option value="Em andamento">Em andamento</option>
                            <option value="Fechado">Fechado</option>
                            <option value="Aberto" selected>Aberto</option>
                        </select>
                        <br><br>
                        <input  name="method" type="hidden" value="PUT"/>
                        <input id="atualizarid" name="id" type="hidden" value="" disabled/>
                        <div class="container" style="background-color:#f1f1f1">
                            <button type="button" onclick="document.getElementById('atualizar').style.display = 'none'" class="cancelbtn">Cancelar</button>
                            <input type="submit" value="Atualizar tarefa" class="confirmbtn"/>
                        </div>
                    </div>
                </form>
            </div>

            <div  id="adicionar" class="modal">
                <form class="modal-content animate"  id="adicionartarefa"  name="adicionartarefa" action="/www/api/Tarefas.php" method="post">
                    <h3>Adicionar tarefa</h3>
                    <div class="container">
                        Descrição: <textarea name="descricao" rows="5" cols="33" placeholder="Descreva a tarefa" required></textarea><br><br>
                        Data de finalização: <input type="date" name="datafim"><br><br>
                        Categoria: <select name="categoria" id="categoria">
                            <option value="Casa">Casa</option>
                            <option value="Estudo">Trabalho</option>
                            <option value="Família">Família</option>
                            <option value="Trabalho" selected>Estudo</option>
                        </select>
                        <br><br>
                        Status: 
                        <select name="status" id="status">
                            <option value="Arquivado">Arquivado</option>
                            <option value="Em andamento">Em andamento</option>
                            <option value="Fechado">Fechado</option>
                            <option value="Aberto" selected>Aberto</option>
                        </select>
                        <br><br>
                        <div class="container" style="background-color:#f1f1f1">
                            <button type="button" onclick="document.getElementById('adicionar').style.display = 'none'" class="cancelbtn">Cancelar</button>
                            <input type="submit" value="Salvar tarefa" class="confirmbtn"/>
                        </div>
                    </div>
                </form>
            </div>
            
             <div id="login_modal" class="modal"> 
             <form id="login_usuario" class="modal-content animate" method="post"> 
                <h3>Login</h3>
                <div class="container">
                    <input type="text" placeholder="Usuario" name="login" required>
                    <input type="password" placeholder="Senha" name="senha" required>        
                </div>
                 <br>
                <div class="container" style="background-color:#f1f1f1">
                    <button type="button" onclick="document.getElementById('login_modal').style.display = 'none'" class="cancelbtn">Cancelar</button>
                    <input type="submit" value="Login" class="confirmbtn"/>
                </div>
                 </form>
            </div>
            

            
        </div>
    </body>
</html>
